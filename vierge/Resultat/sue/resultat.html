<!DOCTYPE html >
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>PolitiScales - Resultat</title>
	<link rel="icon" type="image/png" sizes="16x16" href="../images/Politiscales-icone1.png">
	<link rel="stylesheet" href="../style.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script type="application/javascript" src="../drapeau.js"></script>
	<meta property="og:title" content="Mitt resultat på PolitiScales" />
	<meta property="og:locale" content="sv" />
	<meta property="og:description" content="PolitiScales är ett politiskt test med 8 ideologiska axlar som hjälper dig att placera dig själv politiskt, eller helt enkelt dela din profil med dina vänner." />
</head>

<body>
<header>
	<div id="header">
		<div class="headerLeft"></div><!--
		--><div class="headerMiddle"><h1>PolitiScales</a></h1></div><!--
		--><div class="headerRight"></div>
	</div>
</header>

<div id="content">
	<div id="mainFrame">

		<h2>Résultats</h2>

		<p class="simpleText">
			Resultatet av din PolitiScales delas upp i 8 axlar. Varje axel anger din ståndpunkt i förhållande till två motstridiga ideologier. Särskilda egenskaper, som visas längst ner på sidan, kan också komplettera ditt resultat. För mer information om de olika axlarna, <a href="aide.html" target="_blank">se hjälpsidan</a>.
		</p>

		<div class="flagDecoration"><canvas id="generatedFlag" width="512" height="256"></canvas><div id="slogan"></div></div>

		<hr/>

		<div class="columnContainer">
			<div class="columnLeft">

				<div class="axisDesc"><div class="axisDescLeft"><p>Konstruktivism</p></div><div class="axisDescRight"><p>Essentialism</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/constructivisme.png" alt="Constructivisme" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="cAxisNeg" class="axisSubProgress axisConstructivism"><span id="cAxisNegText"></span></div><!--
				--><div id="cAxisMid" class="axisSubProgress axisNeutral"><span id="cAxisMidText"></span></div><!--
				--><div id="cAxisPos" class="axisSubProgress axisEssentialism"><span id="cAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/essentialisme.png" alt="Essentialisme" \></div>

				<div class="axisDesc"><div class="axisDescLeft"><p>Rehabiliterande rättvisa</p></div><div class="axisDescRight"><p>Straffrättskipning</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/justice_soft.png" alt="Justice réhabilitative" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="jAxisNeg" class="axisSubProgress axisLiberal"><span id="jAxisNegText"></span></div><!--
				--><div id="jAxisMid" class="axisSubProgress axisNeutral"><span id="jAxisMidText"></span></div><!--
				--><div id="jAxisPos" class="axisSubProgress axisAuthoritarism"><span id="jAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/justice_hard.png" alt="Justice punitive" \></div>

				<div class="axisDesc"><div class="axisDescLeft"><p>Progressivism</p></div><div class="axisDescRight"><p>Konservatism</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/progressisme.png" alt="Libertaire" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="sAxisNeg" class="axisSubProgress axisProgressism"><span id="sAxisNegText"></span></div><!--
				--><div id="sAxisMid" class="axisSubProgress axisNeutral"><span id="sAxisMidText"></span></div><!--
				--><div id="sAxisPos" class="axisSubProgress axisConservatism"><span id="sAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/conservatisme.png" alt="Conservatisme" \></div>

				<div class="axisDesc"><div class="axisDescLeft"><p>Internationalism</p></div><div class="axisDescRight"><p>Nationalism</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/internationalisme.png" alt="Internationalisme" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="bAxisNeg" class="axisSubProgress axisInternationalism"><span id="bAxisNegText"></span></div><!--
				--><div id="bAxisMid" class="axisSubProgress axisNeutral"><span id="bAxisMidText"></span></div><!--
				--><div id="bAxisPos" class="axisSubProgress axisNationalism"><span id="bAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/nationalisme.png" alt="Nationalisme" \></div>

			</div>
			<div class="columnRight">

				<div class="axisDesc"><div class="axisDescLeft"><p>Kommunism</p></div><div class="axisDescRight"><p>Kapitalism</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/communisme.png" alt="Communisme" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="pAxisNeg" class="axisSubProgress axisCommunism"><span id="pAxisNegText"></span></div><!--
				--><div id="pAxisMid" class="axisSubProgress axisNeutral"><span id="pAxisMidText"></span></div><!--
				--><div id="pAxisPos" class="axisSubProgress axisCapitalism"><span id="pAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/capitalisme.png" alt="Capitalisme" \></div>

				<div class="axisDesc"><div class="axisDescLeft"><p>Regleringspolitik</p></div><div class="axisDescRight"><p>Låt det hända</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/regulation.png" alt="Régulationnisme" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="mAxisNeg" class="axisSubProgress axisRegulation"><span id="mAxisNegText"></span></div><!--
				--><div id="mAxisMid" class="axisSubProgress axisNeutral"><span id="mAxisMidText"></span></div><!--
				--><div id="mAxisPos" class="axisSubProgress axisLaissez"><span id="mAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/laissezfaire.png" alt="Laissez-faire" \></div>

				<div class="axisDesc"><div class="axisDescLeft"><p>Ekologi</p></div><div class="axisDescRight"><p>Produktivism</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/ecologie.png" alt="Écologie" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="eAxisNeg" class="axisSubProgress axisEcology"><span id="eAxisNegText"></span></div><!--
				--><div id="eAxisMid" class="axisSubProgress axisNeutral"><span id="eAxisMidText"></span></div><!--
				--><div id="eAxisPos" class="axisSubProgress axisProductivism"><span id="eAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/productivisme.png" alt="Productivisme" \></div>

				<div class="axisDesc"><div class="axisDescLeft"><p>Revolution</p></div><div class="axisDescRight"><p>Reformism</p></div></div>
				<div class="axisEnd axisEndLeft"><img src="../images/revolution.png" alt="Révolution" \></div><!--
				--><div class="axisProgress"><!--
				--><div id="tAxisNeg" class="axisSubProgress axisRevo"><span id="tAxisNegText"></span></div><!--
				--><div id="tAxisMid" class="axisSubProgress axisNeutral"><span id="tAxisMidText"></span></div><!--
				--><div id="tAxisPos" class="axisSubProgress axisRefo"><span id="tAxisPosText"></span></div>
				</div><!--
				--><div class="axisEnd axisEndRight"><img src="../images/reformisme.png" alt="Réformisme" \></div>

			</div>
		</div>
		<br/>
        <h2> </h2>
		<div id="bonusBox">
			<h2>Ytterligare funktioner</h2>


			<div id="anarBonus" class="description">
				<div class="descImg"><img src="../images/anarchisme.png" alt="Anarchisme"/></div><!--
				--><div class="descTextMono">
					<p><b>Anarkist : </b>När folket blir slaget med en käpp blir det inte gladare om käppen kallas "folkets käpp". Staten är ett förtryck som måste avlägsnas.</p>
				</div>
			</div>
		
			<div id="pragBonus" class="description">
				<div class="descImg"><img src="../images/pragmatisme.png" alt="Pragmatisme"/></div><!--
				--><div class="descTextMono">
					<p><b>Pragmatiker :</b> Politik handlar om att objektivt se var problemen finns och försöka lösa dem med de medel som står till buds. Filosofi och ideologier i allmänhet åsidosätts till förmån för förvaltning.</p>
				</div>
			</div>
		
			<div id="femiBonus" class="description">
				<div class="descImg"><img src="../images/feminisme.png" alt="Féminisme radical"/></div><!--
				--><div class="descTextMono">
					<p><b>Radikalfeminism : </b> Kön måste försvinna för att patriarkatet ska dö.</p>
				</div>
			</div>
		
			<div id="compBonus" class="description">
				<div class="descImg"><img src="../images/complotisme.png" alt="Complotisme"/></div><!--
				--><div class="descTextMono">
					<p><b>Komplotten : </b>De stora problemen i vårt samhälle är ett verk av en liten grupp människor. Det är därför viktigt att hitta dem, informera allmänheten om deras mål och neutralisera dem.</p>
				</div>
			</div>

			<div id="vegaBonus" class="description">
				<div class="descImg"><img src="../images/veganisme.png" alt="Véganisme"/></div><!--
				--><div class="descTextMono">
					<p><b>Vegan : <b>Människor måste till varje pris stoppa konsumtionen och exploateringen av så kallade "kännande" varelser.</p>
				</div>
			</div>
			
			<div id="monaBonus" class="description">
				<div class="descImg"><img src="../images/monarchisme.png" alt="Monarchisme"/></div><!--
				--><div class="descTextMono">
					<p><b>Monarkist : </b>Samhället bör organiseras kring en kung..</p>
				</div>
			</div>
			
			<div id="reliBonus" class="description">
				<div class="descImg"><img src="../images/religion.png" alt="Missionnaire"/></div><!--
				--><div class="descTextMono">
					<p><b>Missionär : <b>För dig är religionen viktig, särskilt din. Den bör därför spridas så mycket som möjligt över hela världen.</p>
				</div>
			</div>
            
            <div id="laicBonus" class="description">
				<div class="descImg"><img src="../images/laicite.png" alt="Laïcité"/></div><!--
				--><div class="descTextMono">
					<p><b>Sekularism :</b> Religion bör inte ha någon plats i det politiska systemet eller någon annan sektor, men alla kan ha en tro.</p>
				</div>
			</div>
            
            <div id="impeBonus" class="description">
				<div class="descImg"><img src="../images/imperialisme.png" alt="Imperialisme"/></div><!--
				--><div class="descTextMono">
					<p><b>Imperialist : </b> Alla nationer måste vara politiskt, ekonomiskt och militärt beroende av min nation.</p>
				</div>
			</div>
            
            <div id="resiBonus" class="description">
				<div class="descImg"><img src="../images/resistance.png" alt="Résistance"/></div><!--
				--><div class="descTextMono">
					<p><b>Motstånd :</b> När mitt land är i fara eller behöver mig, engagerar jag mig utan att tveka.</p>
				</div>
			</div>
		</div>
</div>

<script>
function getQueryVariable(variable)
{
	var query = window.location.search.substring(1);
	var vars = query.split("&");
	for(var i=0;i<vars.length;i++)
	{
		var pair = vars[i].split("=")
		if(pair[0] == variable)
		{
			if(pair[1] == "NaN")
			{
				return 0
			}
			else
			{
				return pair[1]/100;
			}
		}
	}
	return 0;
}

function setAxisValue(name, value)
{
	var axis = document.getElementById(name)
	if(!axis)
		return
	
	var text = document.getElementById(name+"Text")
	if(!text)
		return
	
	axis.style.width = ((100*value).toFixed(1) + "%");
	
	text.innerHTML = ((100*value).toFixed(0) + "%");
	if (text.offsetWidth > axis.offsetWidth)
		text.style.visibility = "hidden";
}

function setBonus(name, value, limit)
{
	axis = document.getElementById(name)
	if(!axis)
		return
	
	if(value > limit)
	{
		axis.style.display = "block";
		axis.style.opacity = value*value;
	}
	else
	{
		axis.style.display = "none";
	}
}

axes = [
	"c",
	"b",
	"p",
	"m",
	"s",
	"j",
	"e",
	"t"
]

bonus = {
	anar: 0.9,
	prag: 0.5,
	femi: 0.9,
	comp: 0.9,
	vega: 0.5,
	reli: 0.5,
	mona: 0.5,
    laic: 0.5,
    impe: 0.5,
    resi: 0.5,
}

characteristics = []

for(var i=0; i<axes.length; i++)
{
	negativeValue  = getQueryVariable(axes[i]+"0");
	positiveValue  = getQueryVariable(axes[i]+"1");
	setAxisValue(axes[i]+"AxisNeg", negativeValue);
	setAxisValue(axes[i]+"AxisPos", positiveValue);
	setAxisValue(axes[i]+"AxisMid", 1-negativeValue-positiveValue);
	
	if(negativeValue > positiveValue)
	{
		characteristics.push({ name: axes[i]+"0", value: negativeValue});
	}
	else
	{
		characteristics.push({ name: axes[i]+"1", value: positiveValue});
	}
}

bonusEnabled = 0
for(var b in bonus)
{
	
	value = getQueryVariable(b);
	
	setBonus(b+"Bonus", value, bonus[b]);
	
	if(value > bonus[b])
	{
		bonusEnabled = 1;
		characteristics.push({ name: b, value: value});
	}
}

characteristics.sort(function(a, b)
{
	return a.value < b.value;
});

charSlogan = {
	c0: "Jämlikhet",
	b0: "Mänskligheten",
	b1: "Homeland",
	p0: "Socialism",
	p1: "Arbete",
	m1: "Frihet",
	s1: "Familj",
	j0: "Rättvisa",
	j1: "Beställ",
	e0: "Ekologi",
	t0: "Revolution"
}

function findFlagColors()
{
	colors = [];
	
	for(var i=0; i<flagColors.length; i++)
	{
		var accepted = 1;
		
		var mainValue = 0;
		var mainValueFound = 0;
	
		for(var j=0; j<flagColors[i].cond.length; j++)
		{
			var charFound = 0;
			for(var k=0; k<characteristics.length; k++)
			{
				if(characteristics[k].name == flagColors[i].cond[j].name)
				{
					charFound = 1;
					if(characteristics[k].value < flagColors[i].cond[j].vmin || characteristics[k].value > flagColors[i].cond[j].vmax)
						accepted = 0;
					else if(!mainValueFound)
					{
						mainValueFound = 1;
						mainValue = characteristics[k].value;
					}
					
					break;
				}
			}
			
			if(!charFound)
				accepted = 0;
			
			if(!accepted)
				break;
		}
		
		if(accepted)
		{
			colors.push({ bgColor: flagColors[i].bgColor, fgColor: flagColors[i].fgColor, value: mainValue });
		}
	}
	
	colors.sort(function(a, b) { return a.value < b.value; });
	
	return colors;
}

function findFlagShape(numColors)
{
	for(var i=0; i<flagShapes.length; i++)
	{
		var accepted = 1;
		
		if(flagShapes[i].numColors > numColors)
			accepted = 0;
		else
		{
			for(var j=0; j<flagShapes[i].cond.length; j++)
			{
				var charFound = 0;
				for(var k=0; k<characteristics.length; k++)
				{
					if(characteristics[k].name == flagShapes[i].cond[j].name)
					{
						charFound = 1;
						if(characteristics[k].value < flagShapes[i].cond[j].vmin || characteristics[k].value > flagShapes[i].cond[j].vmax)
							accepted = 0;
						
						break;
					}
				}
				
				if(!charFound)
					accepted = 0;
				
				if(!accepted)
					break;
			}
		}
		
		if(accepted)
			return i;
	}
	
	return -1;
}

function findFlagSymbol()
{
	for(var i=0; i<flagSymbols.length; i++)
	{
		var accepted = 1;
		
		for(var j=0; j<flagSymbols[i].cond.length; j++)
		{
			var charFound = 0;
			for(var k=0; k<characteristics.length; k++)
			{
				if(characteristics[k].name == flagSymbols[i].cond[j].name)
				{
					charFound = 1;
					if(characteristics[k].value < flagSymbols[i].cond[j].vmin || characteristics[k].value > flagSymbols[i].cond[j].vmax)
						accepted = 0;
					
					break;
				}
			}
			
			if(!charFound)
				accepted = 0;
			
			if(!accepted)
				break;
		}
		
		if(accepted)
			return flagSymbols[i].id;
	}
	
	return -1;
}

generatedSlogan = "";
sloganDiv = document.getElementById("slogan");
if(sloganDiv)
{
	selectedSlogan = []
	
	for(var i=0; i<characteristics.length; i++)
	{
		if(characteristics[i].value > 0 && charSlogan.hasOwnProperty(characteristics[i].name))
		{
			selectedSlogan.push({ text: charSlogan[characteristics[i].name], value: characteristics[i].value });
		}
	}
	
	selectedSlogan.sort(function(a, b) { return a.value < b.value; });
	
	var counter = 0;
	for(var i=0; i<selectedSlogan.length; i++)
	{
		if(generatedSlogan != "")
			generatedSlogan += " · ";
		generatedSlogan += selectedSlogan[i].text;
		counter++;
		
		if(counter >= 3)
			break;
	}
	
	sloganDiv.innerHTML = generatedSlogan;
}

if(!bonusEnabled)
{
	bonusBox = document.getElementById("bonusBox")
	bonusBox.style.display = "none";
}

var sprites = new Image();
sprites.src = '../images/composants.png';

sprites.onload = function()
{
	flag = document.getElementById("generatedFlag");
	if(flag)
	{
		var ctx = flag.getContext("2d");
		
		var spriteX = 256;
		var spriteY = 128;
		var spriteS = 1.0;
		
		var symbolId = findFlagSymbol();
		var colors = findFlagColors();
		
		if(colors.length <= 0)
			colors.push({ bgColor: "#ffffff", fgColor: "#000000" });
		
		var flagId = findFlagShape(colors.length);
		
		if(flagId < 0)
		{
			ctx.beginPath();
			ctx.rect(0, 0, 512, 256);
			ctx.fillStyle = "#ffffff";
			ctx.fill();
		}
		else
		{
			for(var i=0; i<flagShapes[flagId].shapes.length; i++)
			{
				var path = flagShapes[flagId].shapes[i];
				var numPoints = path.length/2;
				
				ctx.beginPath();
				ctx.moveTo(path[1]*512, path[2]*256);
				
				for(var j=1; j<numPoints; j++)
				{
					ctx.lineTo(path[1+j*2+0]*512, path[1+j*2+1]*256);
				}
				ctx.fillStyle = colors[path[0]].bgColor;
				ctx.fill();
			}
			
			spriteX = flagShapes[flagId].symbol[0]*512;
			spriteY = flagShapes[flagId].symbol[1]*256;
			spriteS = flagShapes[flagId].symbol[2];
		}
		
		if(symbolId >= 0)
		{
			var tmpC = document.createElement('canvas');
			tmpC.width = sprites.width;
			tmpC.height = sprites.height;
			var tmpCtx = tmpC.getContext('2d');
			var coloredSprites = tmpCtx.getImageData(0, 0, tmpC.width, tmpC.height);
			
			tmpCtx.beginPath();
			tmpCtx.rect(0, 0, tmpC.width, tmpC.height);
			tmpCtx.fillStyle = colors[0].fgColor;
			tmpCtx.fill();
			
			tmpCtx.globalCompositeOperation = "destination-in";
			tmpCtx.drawImage(sprites, 0, 0);
			
			ctx.drawImage(tmpC, symbolId*128, 0, 128, 128, spriteX-64*spriteS, spriteY-64*spriteS, 128*spriteS, 128*spriteS);
		}
	}
}

</script>
</body>
<!--/|050706|\-->
</html>
